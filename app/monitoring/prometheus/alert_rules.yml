  #è­¦å ±æœƒåˆ†å¹¾ç¨®ä¸åŒçš„group(modelresultæŒ‡æ¨™æ¯”è¼ƒï¼ŒABæ¨¡å‹æ¯”è¼ƒ)ã€data_driftã€btcç•¶å‰è¶…éå‰æœˆæœ€é«˜ã€æœ€ä½åƒ¹(å»å¹´ã€å‰æœˆ)?

  groups:
    - name: crypto_proj_alerts
      interval: 1m # æ¯ 1 åˆ†é˜åŸ·è¡Œä¸€æ¬¡æ‰€æœ‰çš„ rules
      rules:
      
      # 1ï¸âƒ£ ç›£æ§å‰ 5 å¤§é‡è¦è®Šæ•¸çš„ KS å¹³å‡æ˜¯å¦æ¼‚ç§»
      - alert: FeatureDriftAlert # < alert name
        # å› ç‚ºè¦æŠŠml_feature_drift_score >>> top 5 è®Šæ•¸ksåˆ†æ•¸ä¸€èµ·å¹³å‡æ‰€ä»¥æ‰éœ€è¦avg_over_time
        expr: |
          avg_over_time(ml_feature_drift_score{metric_type="ks"}[1h]) > 0.3 
          and 
          (time() - timestamp(ml_feature_drift_score{metric_type="ks"}) < 60*60*24*30)  # ğŸŸ¡ åƒ…é‡å°è¿‘ 30 å¤©å…§æ•¸æ“š
        for: 1m # æŒçºŒ 1 åˆ†é˜ `True` æ‰æœƒè§¸ç™¼ Alert
        labels:
          severity: warning
        annotations:
          summary: "âš ï¸ Feature Drift Alert!"
          description: "The KS Score of feature {{ $labels.feature_name }} exceeded 0.3. Current Value: {{ printf \"%.2f\" $value }}"
          
      # 2ï¸âƒ£ ç›£æ§ R2 Score (æ¨¡å‹è¡¨ç¾ä½æ–¼æ¨™æº–)
      - alert: LowR2Score
        expr: |
          ml_model_r2 < 0.5 
          and 
          (time() - timestamp(ml_model_r2) < 60*60*24*30)
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "âš ï¸ Low R2 Score Detected"
          description: "The R2 Score of the current model is below 0.6. Current Value: {{ printf \"%.2f\" $value }}"

      # 3ï¸âƒ£ ç›£æ§ SMAPE è¶…é 20%
      - alert: HighSMAPEAlert
        expr: |
          ml_model_mape > 0.3 
          and 
          (time() - timestamp(ml_model_mape) < 60*60*24*30)
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "âš ï¸ High SMAPE Detected"
          description: "The SMAPE is above 20%. Current Value: {{ printf \"%.2f\" $value }}"

      # 4ï¸âƒ£ ç›£æ§ RMSE é«˜æ–¼ 1.5x å¹³å‡å€¼
      - alert: HighRMSEAlert
        expr: |
          ml_model_rmse > 0.1 
          and 
          (time() - timestamp(ml_model_rmse) < 60*60*24*30)
        for: 1m
        labels:
          severity: warning
        annotations:
          summary: "âš ï¸ High RMSE Detected"
          description: "The RMSE is 1.5x the historical average over the past 30 days. Current Value: {{ printf \"%.2f\" $value }}"
